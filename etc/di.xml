<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">

    <preference for="Magento\Catalog\Helper\Image"
                type="MageSuite\LazyResize\Helper\Image" />

    <preference for="Magento\Catalog\Model\View\Asset\Image"
                type="MageSuite\LazyResize\Model\Catalog\View\Asset\Image" />

    <type name="Magento\Catalog\Model\ResourceModel\Product\Gallery">
        <plugin name="add_file_size_column_to_sql_query"
                type="MageSuite\LazyResize\Plugin\Catalog\Model\ResourceModel\Product\Gallery\AddFileSizeColumnToSqlQuery"/>
        <plugin name="mageSuiteLazyResizeGallery"
                type="MageSuite\LazyResize\Plugin\Catalog\Model\ResourceModel\Product\Gallery\AddFileSizeForImage"/>
    </type>
    <type name="Magento\Catalog\Model\Product\Gallery\ReadHandler">
        <plugin sortOrder="1" name="mageSuiteLazyResizeReadHandler"
                type="MageSuite\LazyResize\Plugin\Catalog\Model\Product\Gallery\ReadHandler\GatherFileSizesFromMediaEntries"/>
    </type>
</config>
